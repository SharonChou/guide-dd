define("common/wx/mpEditor/zh_CN.js",["common/wx/mpEditor/editor_all_min.js"],function(e){
"use strict";
e("common/wx/mpEditor/editor_all_min.js"),UE.I18N.zh_CN={
labelMap:{
anchor:"锚点",
undo:"撤销",
redo:"重做",
bold:"加粗",
indent:"首行缩进",
snapscreen:"截图",
italic:"斜体",
underline:"下划线",
strikethrough:"删除线",
subscript:"下标",
fontborder:"字符边框",
superscript:"上标",
formatmatch:"格式刷",
source:"源代码",
blockquote:"引用",
pasteplain:"纯文本粘贴模式",
selectall:"全选",
print:"打印",
preview:"预览",
horizontal:"分隔线",
removeformat:"清除格式",
time:"时间",
date:"日期",
insertrow:"前插入行",
insertcol:"前插入列",
mergeright:"右合并单元格",
mergedown:"下合并单元格",
deleterow:"删除行",
deletecol:"删除列",
splittorows:"拆分成行",
splittocols:"拆分成列",
splittocells:"完全拆分单元格",
mergecells:"合并多个单元格",
deletetable:"删除表格",
cleardoc:"清空文档",
insertparagraphbeforetable:"表格前插入行",
insertcode:"代码语言",
fontfamily:"字体",
fontsize:"字号 10~36px",
letterspacing:"字间距",
justifyindent:"两端缩进",
paragraph:"段落格式",
edittable:"表格属性",
edittd:"单元格属性",
emotion:"表情",
spechars:"特殊字符",
searchreplace:"查询替换",
map:"Baidu地图",
gmap:"Google地图",
insertvideo:"视频",
help:"帮助",
justifyleft:"居左对齐",
justifyright:"居右对齐",
justifycenter:"居中对齐",
justifyjustify:"两端对齐",
forecolor:"字体颜色",
backcolor:"背景色",
insertorderedlist:"有序列表",
insertunorderedlist:"无序列表",
fullscreen:"全屏",
directionalityltr:"从左向右输入",
directionalityrtl:"从右向左输入",
rowspacingtop:"段前距",
rowspacingbottom:"段后距",
highlightcode:"插入代码",
pagebreak:"分页",
insertframe:"插入Iframe",
imagenone:"默认",
imageleft:"左浮动",
imageright:"右浮动",
attachment:"附件",
imagecenter:"居中",
wordimage:"图片转存",
lineheight:"行间距",
edittip:"编辑提示",
customstyle:"自定义标题",
autotypeset:"自动排版",
webapp:"百度应用",
touppercase:"字母大写",
tolowercase:"字母小写",
background:"背景",
template:"模版",
scrawl:"涂鸦",
music:"音乐",
inserttable:"插入表格"
},
insertorderedlist:{
num:"1,2,3...",
num1:"1),2),3)...",
num2:"(1),(2),(3)...",
cn:"一,二,三....",
cn1:"一),二),三)....",
cn2:"(一),(二),(三)....",
decimal:"1,2,3...",
"lower-alpha":"a,b,c...",
"lower-roman":"i,ii,iii...",
"upper-alpha":"A,B,C...",
"upper-roman":"I,II,III..."
},
insertunorderedlist:{
circle:"○ 大圆圈",
disc:"● 小黑点",
square:"■ 小方块 ",
dash:"— 破折号",
dot:" 。 小圆圈"
},
paragraph:{
p:"段落",
h1:"标题 1",
h2:"标题 2",
h3:"标题 3",
h4:"标题 4",
h5:"标题 5",
h6:"标题 6"
},
fontfamily:{
songti:'"宋体"',
kaiti:'"楷体"',
heiti:'"黑体"',
lishu:'"隶书"',
yahei:'"微软雅黑"',
andaleMono:"andale mono",
arial:"arial",
arialBlack:"arial black",
comicSansMs:"comic sans ms",
impact:"impact",
timesNewRoman:"times new roman"
},
insertcode:{
as3:"ActionScript3",
bash:"Bash/Shell",
cpp:"C/C++",
css:"Css",
cf:"CodeFunction",
"c#":"C#",
delphi:"Delphi",
diff:"Diff",
erlang:"Erlang",
groovy:"Groovy",
html:"Html",
java:"Java",
jfx:"JavaFx",
js:"Javascript",
pl:"Perl",
php:"Php",
plain:"Plain Text",
ps:"PowerShell",
python:"Python",
ruby:"Ruby",
scala:"Scala",
sql:"Sql",
vb:"Vb",
xml:"Xml"
},
customstyle:{
tc:"标题居中",
tl:"标题居左",
im:"强调",
hi:"明显强调"
},
elementPathTip:"元素路径",
wordCountTip:"字数统计",
wordCountMsg:"当前已输入{#count}个字符, 您还可以输入{#leave}个字符。 ",
wordOverFlowMsg:'<span style="color:red;">字数超出最大允许值，服务器可能拒绝保存！</span>',
ok:"确认",
cancel:"取消",
closeDialog:"关闭对话框",
tableDrag:"表格拖动必须引入uiUtils.js文件！",
autofloatMsg:"工具栏浮动依赖编辑器UI，您首先需要引入UI文件!",
snapScreen_plugin:{
browserMsg:"仅支持IE浏览器！",
callBackErrorMsg:"服务器返回数据有误，请检查配置项之后重试。",
uploadErrorMsg:"截图上传失败，请检查服务器端环境! "
},
confirmClear:"确定清空当前文档么？",
contextMenu:{
"delete":"删除",
selectall:"全选",
deletecode:"删除代码",
cleardoc:"清空文档",
confirmclear:"确定清空当前文档么？",
unlink:"删除超链接",
paragraph:"段落格式",
edittable:"表格属性",
aligntd:"单元格对齐方式",
aligntable:"表格对齐方式",
tableleft:"左浮动",
tablecenter:"居中显示",
tableright:"右浮动",
edittd:"单元格属性",
justifyleft:"左对齐",
justifyright:"右对齐",
justifycenter:"居中对齐",
justifyjustify:"两端对齐",
table:"表格",
inserttable:"插入表格",
deletetable:"删除表格",
insertparagraphbefore:"前插入段落",
insertparagraphafter:"后插入段落",
deleterow:"删除当前行",
deletecol:"删除当前列",
insertrow:"前插入行",
insertcol:"左插入列",
insertrownext:"后插入行",
insertcolnext:"右插入列",
insertcaption:"插入表格名称",
deletecaption:"删除表格名称",
inserttitle:"插入表格标题行",
deletetitle:"删除表格标题行",
averageDiseRow:"平均分布各行",
averageDisCol:"平均分布各列",
mergeright:"向右合并",
mergeleft:"向左合并",
mergedown:"向下合并",
mergecells:"合并单元格",
splittocells:"完全拆分单元格",
splittocols:"拆分成列",
splittorows:"拆分成行",
tablesort:"表格排序",
reversecurrent:"逆序当前",
orderbyasc:"按ASCII字符升序",
reversebyasc:"按ASCII字符降序",
orderbynum:"按数值大小升序",
reversebynum:"按数值大小降序",
borderbk:"边框底纹",
setcolor:"表格隔行变色",
unsetcolor:"取消表格隔行变色",
setbackground:"选区背景隔行",
unsetbackground:"取消选区背景",
redandblue:"红蓝相间",
threecolorgradient:"三色渐变",
copy:"复制(Ctrl + c)",
copymsg:'请使用 "Ctrl + c"执行复制操作',
paste:"粘贴(Ctrl + v)",
pastemsg:'请使用 "Ctrl + v"执行粘贴操作',
highlightcode:"插入代码"
},
anthorMsg:"链接",
clearColor:"清空颜色",
standardColor:"标准颜色",
themeColor:"主题颜色",
basicColor:"基本色",
recentlyColor:"最近使用颜色",
property:"属性",
"default":"默认",
modify:"修改",
justifyleft:"左对齐",
justifyright:"右对齐",
justifycenter:"居中",
justify:"默认",
clear:"清除",
anchorMsg:"锚点",
"delete":"删除",
clickToUpload:"点击上传",
unset:"尚未设置语言文件",
t_row:"行",
t_col:"列",
pasteOpt:"粘贴选项",
pasteSourceFormat:"保留源格式",
tagFormat:"只保留标签",
pasteTextFormat:"只保留文本",
autoTypeSet:{
mergeLine:"合并空行",
delLine:"清除空行",
removeFormat:"清除格式",
indent:"首行缩进",
alignment:"对齐方式",
imageFloat:"图片浮动",
removeFontsize:"清除字号",
removeFontFamily:"清除字体",
removeHtml:"清除冗余HTML代码",
pasteFilter:"粘贴过滤",
run:"执行"
},
background:{
"static":{
lang_background_normal:"背景设置",
lang_background_local:"本地图片",
lang_background_set:"选项",
lang_background_none:"无",
lang_background_color:"颜色设置",
lang_background_netimg:"网络图片",
lang_background_align:"对齐方式",
lang_background_position:"精确定位",
repeatType:{
options:["居中","横向重复","纵向重复","平铺","自定义"]
}
},
noUploadImage:"当前未上传过任何图片！",
toggleSelect:"单击可切换选中状态\n原图尺寸: "
},
insertimage:{
"static":{
lang_tab_remote:"远程图片",
lang_tab_local:"本地上传",
lang_tab_imgManager:"在线管理",
lang_tab_imgSearch:"图片搜索",
lang_input_url:"地 址：",
lang_input_width:"宽 度：",
lang_input_height:"高 度：",
lang_input_border:"边 框：",
lang_input_vhspace:"边 距：",
lang_input_title:"描 述：",
lang_input_remoteAlign:"对 齐：",
lang_imgLoading:"　图片加载中……",
lock:{
title:"锁定宽高比例"
},
imgType:{
title:"图片类型",
options:["新闻","壁纸","表情","头像"]
},
imgSearchTxt:{
value:"请输入搜索关键词"
},
imgSearchBtn:{
value:"百度一下"
},
imgSearchReset:{
value:"清空搜索"
},
upload:{
style:"background: url(upload.png);"
},
duiqi:{
style:"background: url(imglabel.png) -12px 2px no-repeat;"
},
lang_savePath:"选择保存目录"
},
netError:"网络链接错误，请检查配置后重试！",
noUploadImage:"当前未上传过任何图片！",
imageLoading:"图片加载中，请稍后……",
tryAgain:" :( ，抱歉，没有找到图片！请重试一次！",
toggleSelect:"单击可切换选中状态\n原图尺寸: ",
searchInitInfo:"请输入搜索关键词",
numError:"请输入正确的长度或者宽度值！例如：123，400",
fileType:"图片",
imageUrlError:"不允许的图片格式或者图片域！",
imageLoadError:"图片加载失败！请检查链接地址或网络状态！",
flashError:"Flash插件初始化失败，请更新您的FlashPlayer版本之后重试！",
floatDefault:"默认",
floatLeft:"左浮动",
floatRight:"右浮动",
floatCenter:"居中",
flashI18n:{}
},
webapp:{
tip1:"本功能由百度APP提供，如看到此页面，请各位站长首先申请百度APPKey!",
tip2:"申请完成之后请至ueditor.config.js中配置获得的appkey! ",
applyFor:"点此申请",
anthorApi:"百度API"
},
template:{
"static":{
lang_template_bkcolor:"背景颜色",
lang_template_clear:"保留原有内容",
lang_template_select:"选择模版"
},
blank:"空白文档",
blog:"博客文章",
resume:"个人简历",
richText:"图文混排",
sciPapers:"科技论文"
},
scrawl:{
"static":{
lang_input_previousStep:"上一步",
lang_input_nextsStep:"下一步",
lang_input_clear:"清空",
lang_input_addPic:"添加背景",
lang_input_ScalePic:"缩放背景",
lang_input_removePic:"删除背景",
J_imgTxt:{
title:"添加背景图片"
}
},
noScarwl:"尚未作画，白纸一张~",
scrawlUpLoading:"涂鸦上传中,别急哦~",
continueBtn:"继续",
imageError:"糟糕，图片读取失败了！",
backgroundUploading:"背景图片上传中,别急哦~"
},
music:{
"static":{
lang_input_tips:"输入歌手/歌曲/专辑，搜索您感兴趣的音乐！",
J_searchBtn:{
value:"搜索歌曲"
}
},
emptyTxt:"未搜索到相关音乐结果，请换一个关键词试试。",
chapter:"歌曲",
singer:"歌手",
special:"专辑",
listenTest:"试听"
},
anchor:{
"static":{
lang_input_anchorName:"锚点名字："
}
},
attachment:{
"static":{
lang_input_fileStatus:" 当前未上传文件",
startUpload:{
style:"background:url(upload.png) no-repeat;"
}
},
browseFiles:"文件浏览…",
uploadSuccess:"上传成功!",
delSuccessFile:"从成功队列中移除",
delFailSaveFile:"移除保存失败文件",
statusPrompt:" 个文件已上传！ ",
flashVersionError:"当前Flash版本过低，请更新FlashPlayer后重试！",
flashLoadingError:"Flash加载失败!请检查路径或网络状态",
fileUploadReady:"等待上传……",
delUploadQueue:"从上传队列中移除",
limitPrompt1:"单次不能选择超过",
limitPrompt2:"个文件！请重新选择！",
delFailFile:"移除失败文件",
fileSizeLimit:"文件大小超出限制！",
emptyFile:"空文件无法上传！",
fileTypeError:"文件类型错误！",
unknownError:"未知错误！",
fileUploading:"上传中，请等待……",
cancelUpload:"取消上传",
netError:"网络错误",
failUpload:"上传失败!",
serverIOError:"服务器IO错误！",
noAuthority:"无权限！",
fileNumLimit:"上传个数限制",
failCheck:"验证失败，本次上传被跳过！",
fileCanceling:"取消中，请等待……",
stopUploading:"上传已停止……"
},
highlightcode:{
"static":{
lang_input_selectLang:"选择语言"
},
importCode:"请输入代码"
},
emotion:{
"static":{
lang_input_choice:"精选",
lang_input_Tuzki:"兔斯基",
lang_input_BOBO:"BOBO",
lang_input_lvdouwa:"绿豆蛙",
lang_input_babyCat:"baby猫",
lang_input_bubble:"泡泡",
lang_input_youa:"有啊"
}
},
gmap:{
"static":{
lang_input_address:"地址",
lang_input_search:"搜索",
address:{
value:"北京"
}
},
searchError:"无法定位到该地址!"
},
help:{
"static":{
lang_input_about:"关于UEditor",
lang_input_shortcuts:"快捷键",
lang_input_version:"版本:1.2.6",
lang_input_introduction:"UEditor是由百度web前端研发部开发的所见即所得富文本web编辑器，具有轻量，可定制，注重用户体验等特点。开源基于BSD协议，允许自由使用和修改代码。",
lang_Txt_shortcuts:"快捷键",
lang_Txt_func:"功能",
lang_Txt_bold:"给选中字设置为加粗",
lang_Txt_copy:"复制选中内容",
lang_Txt_cut:"剪切选中内容",
lang_Txt_Paste:"粘贴",
lang_Txt_undo:"重新执行上次操作",
lang_Txt_redo:"撤销上一次操作",
lang_Txt_italic:"给选中字设置为斜体",
lang_Txt_underline:"给选中字加下划线",
lang_Txt_selectAll:"全部选中",
lang_Txt_visualEnter:"软回车",
lang_Txt_fullscreen:"全屏"
}
},
insertframe:{
"static":{
lang_input_address:"地址：",
lang_input_width:"宽度：",
lang_input_height:"高度：",
lang_input_isScroll:"允许滚动条：",
lang_input_frameborder:"显示框架边框：",
lang_input_alignMode:"对齐方式：",
align:{
title:"对齐方式",
options:["默认","左对齐","右对齐","居中"]
}
},
enterAddress:"请输入地址!"
},
map:{
"static":{
lang_city:"城市",
lang_address:"地址",
city:{
value:"北京"
},
lang_search:"搜索"
},
cityMsg:"请选择城市",
errorMsg:"抱歉，找不到该位置！"
},
searchreplace:{
"static":{
lang_tab_search:"查找",
lang_tab_replace:"替换",
lang_search1:"查找",
lang_search2:"查找",
lang_replace:"替换",
lang_searchReg:"支持正则表达式，添加前后斜杠标示为正则表达式，例如“/表达式/”",
lang_searchReg1:"支持正则表达式，添加前后斜杠标示为正则表达式，例如“/表达式/”",
lang_case_sensitive1:"区分大小写",
lang_case_sensitive2:"区分大小写",
nextFindBtn:{
value:"下一个"
},
preFindBtn:{
value:"上一个"
},
nextReplaceBtn:{
value:"下一个"
},
preReplaceBtn:{
value:"上一个"
},
repalceBtn:{
value:"替换"
},
repalceAllBtn:{
value:"全部替换"
}
},
getEnd:"已经搜索到文章末尾！",
getStart:"已经搜索到文章头部",
countMsg:"总共替换了{#count}处！"
},
snapscreen:{
"static":{
lang_showMsg:"截图功能需要首先安装UEditor截图插件！ ",
lang_download:"点此下载",
lang_step1:"第一步，下载UEditor截图插件并运行安装。",
lang_step2:"第二不，插件安装完成后即可使用，如不生效，请重启浏览器后再试！"
}
},
insertvideo:{
"static":{
lang_tab_insertV:"插入视频",
lang_video_url:"视频网址",
lang_video_size:"视频尺寸",
lang_videoW:"宽度",
lang_videoH:"高度",
lang_alignment:"对齐方式",
videoSearchTxt:{
value:"请输入搜索关键字！"
},
videoType:{
options:["全部","热门","娱乐","搞笑","体育","科技","综艺"]
},
videoSearchBtn:{
value:"百度一下"
},
videoSearchReset:{
value:"清空结果"
}
},
numError:"请输入正确的数值，如123,400",
floatLeft:"左浮动",
floatRight:"右浮动",
"default":"默认",
block:"独占一行",
urlError:"输入的视频地址有误，请检查后再试！",
loading:" &nbsp;视频加载中，请等待……",
clickToSelect:"点击选中",
goToSource:"访问源视频",
noVideo:" &nbsp; &nbsp;抱歉，找不到对应的视频，请重试！"
},
spechars:{
"static":{},
tsfh:"特殊字符",
lmsz:"罗马字符",
szfh:"数学字符",
rwfh:"日文字符",
xlzm:"希腊字母",
ewzm:"俄文字符",
pyzm:"拼音字母",
zyzf:"注音及其他"
},
edittable:{
"static":{
lang_tableStyle:"表格样式",
lang_insertCaption:"添加表格标题行",
lang_insertTitle:"添加表格名称行",
lang_orderbycontent:"使表格内容可排序",
lang_tableSize:"自动调整表格尺寸",
lang_autoSizeContent:"按表格文字自适应",
lang_autoSizePage:"按页面宽度自适应",
lang_example:"示例",
lang_borderStyle:"表格边框",
lang_color:"颜色:"
},
captionName:"表格名称",
titleName:"标题",
cellsName:"内容"
},
edittip:{
"static":{
lang_delRow:"删除整行",
lang_delCol:"删除整列"
}
},
edittd:{
"static":{
lang_tdBkColor:"背景颜色:"
}
},
formula:{
"static":{}
},
wordimage:{
"static":{
lang_resave:"转存步骤",
uploadBtn:{
src:"upload.png",
alt:"上传"
},
clipboard:{
style:"background: url(copy.png) -153px -1px no-repeat;"
},
lang_step:"1、点击顶部复制按钮，将地址复制到剪贴板；2、点击添加照片按钮，在弹出的对话框中使用Ctrl+V粘贴地址；3、点击打开后选择图片上传流程。"
},
fileType:"图片 ",
flashError:"FLASH初始化失败，请检查FLASH插件是否正确安装！ ",
netError:"网络连接错误，请重试！ ",
copySuccess:"图片地址已经复制！ ",
flashI18n:{}
}
};
});define("tpl/media/templateListContent.html.js",[],function(){
return'{if !!msg}\n<p class="weui-desktop-media-tips">{msg}</p>\n{else}\n<div class="weui-desktop-media__list tj">\n  <div class="weui-desktop-media__list-col tj_item">\n  {each list as item index}\n  {if index%2==0} \n  {=item.contentHtml}\n  {/if}\n  {/each}\n  </div>&nbsp;\n  <div class="weui-desktop-media__list-col tj_item">\n  {each list as item index}\n  {if index%2==1} \n  {=item.contentHtml}\n  {/if}\n  {/each}\n  </div>\n</div>\n{/if}';
});define("tpl/media/templateListDialog.html.js",[],function(){
return'<div class="dialog_media_container">\n  <div class="weui-desktop-global-mod weui-desktop-media-global-bar">\n    <div class="weui-desktop-global__extra">\n      <a class="btn btn_default" target="_blank" href=\'/cgi-bin/appmsgtemplate?action=list&begin=0&count=6&lang=zh_CN&token={token}\'>管理模版</a>\n    </div>\n  </div>\n  <div class="weui-desktop-media-list-wrp">\n    <p class="js_loading icon_loading_small white">加载中</p>\n    <div class="js_content" style="display: none;"></div>\n  </div>\n  <div class="js_pagebar pagination_wrp"></div>\n</div>';
});define("tpl/mpEditor/templateDialogLayout.html.js",[],function(){
return'<div>\n    <div id="##" class="%%">\n        <!-- 正文 -->\n        <div class="editor_area">\n            <div class="split_line"></div>\n            <div id="##_iframeholder" class="%%-iframeholder">\n                <div id="##_contentplaceholder" class="editor_content_placeholder" style="display:none">从这里开始写模版</div>\n            </div>\n        </div>\n    </div>\n</div>\n';
});define("tpl/media/templateDialog.html.js",[],function(){
return'<div class="dialog_media_container">\n  <div class="weui-desktop-global-mod weui-desktop-media-global-bar">\n    <div class="weui-desktop-global__extra">\n      <a class="btn btn_default" target="_blank" href=\'/cgi-bin/appmsgtemplate?action=list&begin=0&count=6&lang=zh_CN&token={token}\'>管理模版</a>\n    </div>\n  </div>\n  <div class="appmsg_tmpl_form">\n    <div class="frm_control_group">\n      <!--<label for="" class="frm_label">模版名称</label>-->\n      <div class="frm_controls">\n        <span class="frm_input_box"><input class="js_title frm_input" placeholder="模版名称" type="text"></span>\n        <p class="js_title_fail frm_msg fail"></p>\n      </div>      \n    </div>\n    <div class="frm_control_group">\n      <!--<label for="" class="frm_label">模版内容</label>-->\n      <div class="frm_controls">\n        <div class="js_editor appmsg_tmpl_wrp"></div>\n        <p class="js_content_fail frm_msg fail"></p>\n      </div>\n    </div>\n  </div>\n</div>';
});define("tpl/media/appmsg_tmpl.html.js",[],function(){
return'<div class="js_appmsg appmsg single" data-id="{appmsgid}">\n    <div class="appmsg_content">\n        <div class="appmsg_info">\n            {if showUpdateTime}\n                <em class="appmsg_date">更新于 {update_time_str}</em>            \n            {/if}\n        </div>\n        <div class="appmsg_item">\n            <h4 class="appmsg_title js_title">\n                <span>{=title_encode}</span>\n            <div class="appmsg_thumb_wrp">\n              {=iframeHtml}\n            </div>\n            {if canPreview}            \n            {else if !canSelect}\n            <a href="javascript:;" style="display: block;" class="edit_mask preview_mask temp_mask">\n                <div class="edit_mask_content">\n                    <p class=""></p>\n                </div>\n                <span class="vm_box"></span>\n            </a>\n            {/if}\n        </div>\n        {if canSelect}\n        <div class="js_mask edit_mask appmsg_mask">\n            <i class="icon_card_selected">已选择</i>\n        </div>\n        {/if}\n    </div>\n    {if showEdit}\n    <div class="appmsg_opr">\n        <ul>\n            <li class="appmsg_opr_item grid_item size1of2">\n            <a target="_blank" class="js_tooltip" href="/cgi-bin/appmsgtemplate?action=edit&lang=zh_CN&token={token}&appmsgid={appmsgid}" data-tooltip="编辑">&nbsp;<i class="icon18_common edit_gray">编辑</i></a>\n            </li>\n            <li class="appmsg_opr_item grid_item size1of2 no_extra">\n                <a class="js_del no_extra js_tooltip" data-id="{appmsgid}" href="javascript:void(0);" data-tooltip="删除">&nbsp;<i class="icon18_common del_gray">删除</i></a>\n            </li>\n        </ul>\n    </div>\n    {/if}\n</div>\n';
});define("tpl/mpEditor/plugin/cps_template_popup.html.js",[],function(){
return'<div class="js_product_popup edui_mask_edit_group with_line edui-product-popup cps">\n  <div class="js_template primary edui_mask_edit_meta no_extra edui-clickable" onclick="$$._fireEventAndHide(\'show_cps_template_dialog\',this);">\n    <div class="edui_mask_edit_meta_inner">\n      <i class="icon_edui_mask_img icon_edui_mask_product_theme"></i>\n      切换模版    </div>\n  </div>\n</div>';
});define("common/wx/media/cpsUtils.js",["tpl/media/product_iframe_smart_tips.html.js","tpl/media/product_highline_style.html.js","common/wx/Cgi.js","tpl/media/cps_template/list_tmpl.html.js","tpl/media/cps_template/banner_tmpl.html.js","tpl/media/cps_template/card_tmpl.html.js"],function(t){
"use strict";
function a(){
return j.category_id_book;
}
function e(){
return j.category_id_movie;
}
function r(){
return++j.datakeyUid+"_"+Math.random();
}
function i(t){
return t=(t||"").toLowerCase(),/^#[0-9a-f]{6}$/.test(t)?!0:!1;
}
function o(t){
if(!t)return"";
var a=d(t),e="";
if(a&&a.templateId){
var r=a.productData;
if(r&&r.length>0)if(2==a.type){
var i=l(a.templateId);
if(i){
var o=[];
for(r=[].concat(a.productData);r.length>0;)o.push(r.splice(0,i.loop));
for(var p=0,n=o.length;n>p;p++){
var c="";
c=j.smartTipsCompile({
smart_num:a.smartNum
}),e+=c,e+=m(o[p],a.templateId,a.color);
}
}
}else e=m(r,a.templateId,a.color);
}
return $("#mpcps_iframe_css").html()+e;
}
function d(t,a){
if(!t)return null;
var e=t.getAttribute("data-datakey")||"";
if(!e||!j.iframeProductData[e])return null;
if(a!==!0)return j.iframeProductData[e];
try{
return JSON.parse(JSON.stringify(j.iframeProductData[e]));
}catch(r){
return null;
}
}
function l(t){
var a=j.templateData||null;
if(!a||!a.template_list)return null;
for(var e=null,r=0,i=a.template_list.length;i>r;r++)if(a.template_list[r].template_id==t){
e=a.template_list[r];
break;
}
return e&&e.loop&&e.template_xml?e:null;
}
function p(t){
if(t=t||{},j.templateData&&"function"==typeof t.callback)return void t.callback(j.templateData);
j.templateData={
default_template_id:"banner",
template_list:[{
template_id:"banner",
template_xml:I,
loop:1
},{
template_id:"list",
template_xml:D,
loop:1
},{
template_id:"card",
template_xml:b,
loop:1
}]
};
var a=!1;
0==location.href.indexOf("http://dev")&&(a=!0);
for(var e=0,r=j.templateData.template_list.length;r>e;e++){
var i=j.templateData.template_list[e];
i.name||(i.name="模板"+(e+1)),i.color=j.defaultColor,i.pic_cover_url=i.pic_cover_url||"",
0==i.pic_cover_url.indexOf("http")||a||(i.pic_cover_url="https://res.wx.qq.com"+i.pic_cover_url);
}
"function"==typeof t.callback&&t.callback(j.templateData);
}
function n(t){
if(t.category_id==e()){
var r="";
t.movie.actor.forEach(function(t){
0!=r.length&&0!=t.length&&(r+="/"),r+=t;
}),t.cps_desc=r,t.cps_desc_long="主演："+r;
}else if(t.category_id==a()){
var i="";
t.book.author.forEach(function(t){
0!=i.length&&0!=t.length&&(i+="/"),i+=t;
}),t.cps_desc=i,t.cps_desc_long="作者："+i;
}
}
function c(t){
if(void 0!=t&&0!=t.length){
var a="",e="";
t.dataList.forEach(function(t,r){
0!=r&&(a+=";",e+=";"),a+=t.dataValue.appid,e+=t.dataValue.productId[0];
}),C.post({
url:"/cgi-bin/cpsproductmaterial?action=batch_get_product_info",
data:{
appid_list:encodeURI(a),
pid_list:encodeURI(e)
}
},function(a){
if(a&&a.base_resp&&0==a.base_resp.ret&&0!=a.product_list.length){
var e={};
a.product_list.forEach(function(t){
n(t);
var a=t.appid+"_"+t.pid;
e[a]=t;
}),t.dataList.forEach(function(t){
var a=t.dataValue,r=a.appid+"_"+a.productId[0],i=e[r];
j.iframeProductData[t.datakey].productData[0]=i;
}),t.onSuccess&&t.onSuccess();
}else t.onError&&t.onError();
});
}
}
function s(t,a,e){
$(a).find("img").each(function(){
this.onload=u(t,a,e),this.onerror=u(t,a,e);
var r=this.getAttribute("data-src");
this.src=r;
});
}
function u(t,a,e){
return function(){
var r=this;
if(r.onload=null,r.onerror=null,this.className.indexOf(".js_cover")&&$(this).parents(".js_list_container").length>0){
var i=this.parentNode;
if(i){
var o=document.createElement("span");
o.className=this.className,o.style.background='url("'+this.src+'") no-repeat center',
i.insertBefore(o,this),i.removeChild(this);
}
}
setTimeout(function(){
var r=a.ownerDocument,i=r?r.defaultView||r.parentWindow:null;
if(i&&t&&t.contentWindow===i){
var o=$(a).outerHeight()+24;
if($(t).css({
height:o+"px"
}),"undefined"!=typeof e){
var d=window.UE.instants["ueditorInstant"+e];
d&&(j.adjustheightId&&(clearTimeout(j.adjustheightId),j.adjustheightId=null),j.adjustheightId=setTimeout(function(){
d.fireEvent("adjustheight");
},50));
}
}
},0);
};
}
function m(t,r){
t[0].category_id==a()&&(r="list");
var i=l(r);
if(!i)return"";
for(var o=i.template_xml,d=Math.min(i.loop,t.length),p={
url:"url",
title:"title",
desc:"cps_desc_long",
source_logo_url:"source_logo_url",
source_name:"source_name",
img_url:"img_url",
appid:"appid",
pid:"pid",
price:"price",
templateid:r
},n=0;d>n;n++){
var c=t[n];
for(var s in p){
var u=new RegExp("\\{\\{"+s+"\\}\\}","g"),m="";
m="undefined"!=typeof c[p[s]]?c[p[s]]:p[s],o=o.replace(u,m);
}
}
var f=$("<div>").html(o),_=1;
return f.find("."+j.appmsgLoopClass).each(function(){
_>d&&$(this).remove(),_++;
}),0==t[0].has_commission&&(f.find(".js_cps_adTag").hide(),f.find(".js_btn_word").text("详情")),
1==t[0].ad_block_status?f.find(".js_cps_check_fail").show():f.find(".js_cps_check_fail").hide(),
"list"==r&&(t[0].category_id==a()||t[0].category_id==e()?(f.find(".js_price").removeClass("show"),
f.find(".js_price").addClass("hide"),f.find(".js_desc").removeClass("hide"),f.find(".js_desc").addClass("show")):(f.find(".js_price").removeClass("hide"),
f.find(".js_price").addClass("show"),f.find(".js_desc").removeClass("show"),f.find(".js_desc").addClass("hide"),
f.find(".js_title").addClass("line2"))),t[0].category_id!=e()&&f.find(".js_product_container").addClass("cps_inner_book"),
f.html();
}
function f(t){
if(!t||!t.productData)return null;
for(var a=[],e=0;e<t.productData.length;e++){
var i=g(t.productData[e]);
a.push(i);
}
var o=r();
return j.iframeProductData[o]={
type:t.type,
productData:a,
templateId:t.templateId,
productId:t.productId,
packId:t.packId,
smartNum:t.smartNum,
color:t.color,
categoryid:t.categoryid,
appid:t.appid
},o;
}
function _(t){
var a,e=t.getAttribute("data-product")||"";
try{
e=decodeURIComponent(e),e=JSON.parse(e);
}catch(i){
e=null;
}
var o=null;
if(e&&e.productData&&e.productData.length>0){
o=[];
for(var d=0;d<e.productData.length;d++){
var l=g(e.productData[d]);
o.push(l);
}
var p=t.getAttribute("data-datakey")||"";
p||(p=r(),t.setAttribute("data-datakey",p)),a={
productData:o,
type:t.getAttribute("data-type"),
color:t.getAttribute("data-color"),
smartNum:t.getAttribute("data-smartnum"),
packId:t.getAttribute("data-packid"),
productId:t.getAttribute("data-pid"),
templateId:t.getAttribute("data-templateid"),
categoryid:t.getAttribute("data-categoryid"),
appid:t.getAttribute("data-appid")
};
try{
a.productId=decodeURIComponent(a.productId).split(j.pidSplitKey);
}catch(i){
a.productId=a.productId.split(j.pidSplitKey);
}
j.iframeProductData[p]=a;
for(var d in a)if(a.hasOwnProperty(d)){
var n=d;
"productData"==d?n="product":"productId"==d&&(n="pid"),t.removeAttribute("data-"+n.toLowerCase());
}
}else a=null;
return{
datakey:p,
dataValue:a
};
}
function h(t){
var a=t.getAttribute("data-datakey")||"";
if(a&&j.iframeProductData[a]){
var e=j.iframeProductData[a];
for(var r in e)if(e.hasOwnProperty(r)){
var i=e[r];
if("productData"==r)try{
t.setAttribute("data-product",encodeURIComponent(JSON.stringify({
productData:i
})));
}catch(o){
t.setAttribute("data-product","");
}else"productId"==r?t.setAttribute("data-pid",encodeURIComponent(i.join(j.pidSplitKey))):t.setAttribute("data-"+r.toLowerCase(),i);
}
}
}
function g(t){
return t&&t.pid?(j.productData[t.pid]=t,j.productData[t.pid]):null;
}
function v(t){
var a=t.getAttribute("data-datakey")||"";
if(a&&j.iframeProductData[a])try{
delete j.iframeProductData[a];
}catch(e){}
}
var y=t("tpl/media/product_iframe_smart_tips.html.js"),C=(t("tpl/media/product_highline_style.html.js"),
t("common/wx/Cgi.js")),D=t("tpl/media/cps_template/list_tmpl.html.js"),I=t("tpl/media/cps_template/banner_tmpl.html.js"),b=t("tpl/media/cps_template/card_tmpl.html.js"),j={
datakeyUid:+new Date,
templateData:null,
adjustheightId:null,
smartTipsCompile:template.compile(y),
productData:{},
iframeProductData:{},
appmsgContainerClass:"js_product_container",
appmsgLoopClass:"js_product_loop_content",
appmsgProductErrClass:"js_product_err_container",
defaultColor:"#fa7834",
pidSplitKey:",#%$&",
category_id_book:3,
category_id_movie:2
};
return{
validColor:i,
defaultColor:j.defaultColor,
pidSplitKey:j.pidSplitKey,
appmsgContainerClass:j.appmsgContainerClass,
appmsgLoopClass:j.appmsgLoopClass,
appmsgProductErrClass:j.appmsgProductErrClass,
getIframeContentByIframe:o,
getIframeContent:m,
getOptionsFromIframe:d,
getTemplateDataById:l,
getTemplate:p,
addIframeImgLoadEvent:s,
getDataFromCustomTag:_,
setData2CustomTag:h,
cacheIframeData:f,
clearIframeProductDataByDom:v,
updateCpsData:c,
dealCpsData:n,
getBookCategoryId:a,
getMovieCategoryId:e
};
});define("common/wx/media/cpsTemplateDialog.js",["common/wx/popup.js","common/wx/Tips.js","common/wx/media/cpsUtils.js","common/wx/mpEditor/utils.js","tpl/media/cps_template_dialog.html.js","tpl/media/product_style_dialog_content.html.js"],function(t){
"use strict";
function e(t){
this._o={
color:i.defaultColor,
templateId:"banner",
showType:"banner",
productData:null,
editor:null
},this._g={
dom:{}
},this._extend(t),this.initDialog();
}
t("common/wx/popup.js");
var o=t("common/wx/Tips.js"),i=t("common/wx/media/cpsUtils.js"),n=t("common/wx/mpEditor/utils.js"),s=t("tpl/media/cps_template_dialog.html.js"),a=t("tpl/media/product_style_dialog_content.html.js");
return e.prototype={
_extend:function(t){
for(var e in t)this._o[e]=t[e];
},
renderList:function(t){
for(var e=this,o=[],a=0,l=t.template_list.length;l>a;a++){
for(var d=t.template_list[a],c=d.template_id,r=d.loop,m=[],p=0;r>p;p++)m.push(this._o.productData);
o.push({
name:d.name,
id:c,
cover:d.pic_cover_url||"",
html:function(t,e,o){
return n.createLocalIframe({
attr:{
style:"width:100%"
},
$dom:e,
onIframeReadyFunc:function(e){
e.doc.body.innerHTML=t,o(e.iframe,e.doc.body);
}
});
}(i.getIframeContent(m,c,this._o.color),this._g.dom.$content,i.addIframeImgLoadEvent)
});
}
var _=wx.T(s,{
show_type:e._o.showType,
select_id:e._o.templateId
});
this._g.dom.$content.html(_),this.bindEvent();
},
initDialog:function(){
var t=this,e=this._o,n=this._g,s=n.dom;
e.editor&&e.editor.fireEvent("handleWinScroll",!1),s.$dialog=$(wx.T(a,{})).popup({
height:610,
width:925,
title:"选择卡片模板",
autoShow:!0,
className:"dialog_product_template",
buttons:[{
text:"确定",
type:"primary",
classWrap:"js_save_btn",
click:function(){
if(!t._o.templateId)return void o.err("请选择卡片模板");
var e=this;
t.destory(e),t._o.callback({
id:t._o.templateId
});
}
},{
text:"取消",
type:"default",
classWrap:"js_cancel_btn",
click:function(){
t.destory(this);
}
}],
onHide:function(){
t.destory(this);
}
}),s.$saveBtn=s.$dialog.find(".js_save_btn"),s.$cancelBtn=s.$dialog.find(".js_cancel_btn"),
s.$content=s.$dialog.find(".js_content"),i.getTemplate({
callback:function(e){
t.hasLive&&t.renderList(e);
}
});
},
bindEvent:function(){
var t=this,e=this._g.dom;
e.$content.find(".js_cps_template").click(function(){
var o=$(this).data("id");
e.$content.find(".js_cps_template.selected").removeClass("selected"),$(this).addClass("selected"),
t.select(o);
});
},
select:function(t){
this._o.templateId=t;
},
hasLive:function(){
return this._g.dom&&this._g.dom.$dialog?!0:!1;
},
destory:function(t){
t&&t.remove(),this._g.dom=null,this._g.productListObj=null,this._o.editor&&this._o.editor.fireEvent("handleWinScroll",!0);
}
},{
myclass:e
};
});define("common/wx/media/cpsDialog.js",["common/wx/popup.js","common/wx/Tips.js","common/wx/Cgi.js","tpl/media/cps_dialog.html.js","tpl/media/cps_dialog_product_list.html.js","tpl/media/cps_dialog_category.html.js","tpl/media/cps_no_commission_tip.html.js","biz_web/widget/dropdown.css","tpl/media/product_dropdown.html.js","tpl/media/product_dropdown_item.html.js","common/wx/media/cpsUtils.js","common/wx/tooltips.js","common/wx/popover.js","common/wx/media/cpsTipDialog.js"],function(e){
"use strict";
function t(e){
this._o={
maxLen:10,
tipStatus:{},
choiceNoCommissionNeedTip:!1,
editor:null,
callback:function(){}
},this._g={
dom:{}
},this._extend(e),this._g.listCompile=template.compile(c),this._g.categoryCompile=template.compile(n),
this._g.sourceCompile=template.compile(r),this._g.sourceItemCompile=template.compile(a);
var t=this;
p.templateData?this.initDialog():d.getTemplate({
callback:function(e){
p.templateData=e,t.initDialog();
}
});
}
e("common/wx/popup.js");
{
var o=e("common/wx/Tips.js"),i=e("common/wx/Cgi.js"),s=e("tpl/media/cps_dialog.html.js"),c=e("tpl/media/cps_dialog_product_list.html.js"),n=e("tpl/media/cps_dialog_category.html.js");
e("tpl/media/cps_no_commission_tip.html.js");
}
e("biz_web/widget/dropdown.css");
var r=e("tpl/media/product_dropdown.html.js"),a=e("tpl/media/product_dropdown_item.html.js"),d=e("common/wx/media/cpsUtils.js"),l=(e("common/wx/tooltips.js"),
e("common/wx/popover.js")),p=(e("common/wx/media/cpsTipDialog.js"),{
templateData:null,
category_list:[],
source_list:[],
userStatus:1,
search_count:10,
cpsSearchAllCnt:0,
searchReq:{
category_id:"1",
source_id:"0",
keyword:"",
order_by_commission_ratio:1,
with_cps:1,
offset:0,
count:10
},
product_list:[],
fortest:!1,
loadMoreTimer:null
});
return t.prototype={
_extend:function(e){
for(var t in e)this._o[t]=e[t];
},
initDialog:function(){
var e=this,t=this,o=this._o,i=this._g,c=i.dom;
o.editor&&o.editor.fireEvent("handleWinScroll",!1),c.$dialog=$(wx.T(s,{
openPublisherLink:"",
brokerageExplainLink:""
})).popup({
height:610,
width:925,
title:"选择商品",
autoShow:!0,
className:"dialog-select-cps",
buttons:[{
text:"确定",
type:"primary",
classWrap:"js_save_btn",
click:function(){
var e=t.getSelectedProduct();
if(0!=e&&void 0!=e){
t._g.selectedData=e;
var o=t.__judgeHasNoCommsion();
return 1==t._o.tipStatus.choiceNoCommissionNeedTip&&1==o?(1==p.is_publisher?t.popupChoiceNoCommissionTip():1==p.can_be_publisher?t.popupTwoTip():t.popupCanNotInsertTip(),
void t.destory(this)):void(1==p.is_publisher?(t._o.callback(e),t.destory(this)):1==p.can_be_publisher?(t.popupWillBePublisherTip(),
t.destory(this)):(t.popupCanNotInsertTip(),t.destory(this)));
}
}
},{
text:"取消",
type:"default",
classWrap:"js_cancel_btn",
click:function(){
e.destory(this);
}
}],
onHide:function(){
e.destory(this);
}
}),this.bindEvent(),this.httpGetBaseInfo();
},
__judgeHasNoCommsion:function(e){
for(var e=this._g.selectedData.productData,t=0;t<e.length;t++)if(0==e[t].has_commission)return!0;
return!1;
},
__judgeNeedTip:function(){},
popupChoiceNoCommissionTip:function(){
var e=this;
e._o.tipStatus.choiceNoCommissionNeedTip=!1,$(s).find("#js_choice_no_commission_tip").popup({
width:925,
title:"选择商品",
autoShow:!0,
className:"js_cps_tip",
buttons:[{
text:"继续",
type:"primary",
click:function(){
e._o.callback(e._g.selectedData),this.remove();
}
},{
text:"取消",
type:"default",
click:function(){
this.remove();
}
}],
onHide:function(){
this.remove();
}
});
},
popupCanNotInsertTip:function(){
$(s).find("#js_can_not_insert_tip").popup({
width:925,
title:"选择商品",
autoShow:!0,
className:"js_cps_tip",
buttons:[{
text:"确定",
type:"primary",
click:function(){
this.remove();
}
}],
onHide:function(){
this.remove();
}
});
},
popupWillBePublisherTip:function(){
var e=this,t=!0,o=$(s).find("#js_will_be_publisher_tip").popup({
width:925,
title:"添加商品",
autoShow:!0,
className:"js_cps_tip",
buttons:[{
text:"确定",
type:"primary",
classWrap:"js_ok_btn",
click:function(){
if(0!=t){
var o=this;
e.httpSetPulisher({
tipThis:o
});
}
}
},{
text:"取消",
type:"default",
classWrap:"",
click:function(){
this.remove();
}
}],
onHide:function(){
this.remove();
}
}),i=o.find(".js_ok_btn"),c=o.find(".js_checkbox"),n=o.find(".js_agreed");
c.prop("checked",!0),c.addClass("selected"),n.click(function(){
var e=$(this).prop("checked");
t=!e,1==e?(i.removeClass("primary"),i.addClass("btn_disabled"),c.removeClass("selected")):(i.removeClass("btn_disabled"),
i.addClass("primary"),c.addClass("selected"));
});
},
popupTwoTip:function(){
{
var e=this;
this._g.dom;
}
e._o.tipStatus.choiceNoCommissionNeedTip=!1,$(s).find("#js_choice_no_commission_tip").popup({
width:925,
title:"选择商品",
autoShow:!0,
className:"js_cps_tip",
buttons:[{
text:"继续",
type:"primary",
click:function(){
this.remove(),e.popupWillBePublisherTip();
}
},{
text:"取消",
type:"default",
click:function(){
this.remove();
}
}],
onHide:function(){
this.remove();
}
});
},
bindEvent:function(){
var e=this._g.dom,t=this;
if(e){
e.$saveBtn=e.$dialog.find(".js_save_btn"),e.$cancelBtn=e.$dialog.find(".js_cancel_btn"),
e.$cpsContainer=e.$dialog.find(".js_cps_container"),e.$categoryContainer=e.$dialog.find(".js_category_container"),
e.$cpsAllCount=e.$cpsContainer.find(".js_cps_all_count"),e.$categorySelectedWording=e.$dialog.find(".js_search_tag"),
e.$searchClearBtn=e.$dialog.find(".js_search_clear_btn"),e.$searchWord=e.$dialog.find(".js_search_word"),
e.$sarchSubmit=e.$dialog.find(".js_search_submit"),e.$cpsListContiner=e.$dialog.find(".js_cps_list"),
e.$cpsListScrollArea=e.$dialog.find(".js_cps_list_scroll_area"),e.$cpsSelectedCntContainer=e.$dialog.find(".js_selected_cnt_container"),
e.$cpsSelectedCnt=e.$dialog.find(".js_selected_cnt"),e.$cpsCommissionSort=e.$cpsContainer.find(".js_commission_sort"),
e.$cpsListScrollArea.on("scroll",function(e){
t.qrcodePop&&t.qrcodePop.hide(),e.currentTarget.scrollHeight-e.currentTarget.scrollTop<e.currentTarget.offsetHeight+100&&t.loadMore();
}),e.$cpsAllCount.hide(),e.$cpsSelectedCntContainer.hide(),e.$qrcodeSucc=e.$cpsContainer.find(".js_qrcode_succ"),
e.$qrcodeFail=e.$cpsContainer.find(".js_qrcode_fail"),e.$qrcodeSucc.hide(),e.$qrcodeFail.hide(),
e.$searchClearBtn.click(function(){
e.$searchWord.val(""),e.$searchClearBtn.hide(),t.httpGetCpsList({
keyword:""
},!0);
}),this.__changeSearchClearBtn(),e.$searchWord.keyup(function(){
t.__changeSearchClearBtn();
}),e.$searchWord.bind("keypress",function(o){
13==o.keyCode&&(t.__searchSubmit(),""==e.$searchWord.val()?e.$searchClearBtn.hide():e.$searchClearBtn.show());
}),e.$sarchSubmit.click(function(){
t.__searchSubmit(),""==e.$searchWord.val()?e.$searchClearBtn.hide():e.$searchClearBtn.show();
}),e.$dialog.find(".js_cancel_all").click(function(){
p.product_list.forEach(function(e){
e.checked=!1;
}),e.$cpsListContiner.find(".frm_checkbox_label").removeClass("selected"),e.$cpsSelectedCntContainer.hide();
}),e.$cpsContainer.find(".js_see_income").each(function(){
this.href=wx.url("/cgi-bin/frame?t=ad_system/common_frame&t1=publisher/publisher_cps_new");
}),e.$commissionAsk=e.$cpsContainer.find(".js_commission_ask");
var o=e.$cpsContainer.find(".js_commission_explain").html();
e.$commissionAsk.mouseover(function(){
t.askPop=new l({
dom:e.$commissionAsk,
content:o,
place:"bottom",
margin:"center",
hover:!0,
hideIfBlur:!0,
addCls:"js_commission_pop"
});
}),e.$cpsContainer.click(function(){
e.$sourceContainer.find(".jsDropdownList").hide(),e.$commissionContainer.find(".jsDropdownList").hide();
});
}
},
__changeSearchClearBtn:function(){
var e=this._g.dom,t=e.$searchWord.val()||"";
t.length>0?e.$searchClearBtn.show():e.$searchClearBtn.hide();
},
__searchSubmit:function(){
var e=this._g.dom,t=e.$searchWord.val()||"";
this.httpGetCpsList({
keyword:t
},!0);
},
__changeSelectedCnt:function(){
var e=this._g.dom,t=0;
p.product_list.forEach(function(e){
e.checked===!0&&(t+=1);
}),0==t?e.$cpsSelectedCntContainer.hide():(e.$cpsSelectedCnt.text(t),e.$cpsSelectedCntContainer.show());
},
httpGetCpsList:function(e,t){
function s(){
p.product_list.forEach(function(e){
if(e.category_id==d.getMovieCategoryId()){
var t="";
e.movie.actor.forEach(function(e){
0!=t.length&&0!=e.length&&(t+="/"),t+=e;
}),e.cps_desc=t,e.cps_desc_long="主演："+t;
}else if(e.category_id==d.getBookCategoryId()){
var o="";
e.book.author.forEach(function(e){
0!=o.length&&0!=e.length&&(o+="/"),o+=e;
}),e.cps_desc=o,e.cps_desc_long="作者："+o;
}
});
var e=r._g.dom;
e.$cpsListContiner.html(r._g.listCompile({
product_list:p.product_list,
is_publisher:p.is_publisher
})),e.$cpsListContiner.find(".js_cps_list").click(function(){
var t=$(this).data("index");
p.product_list[t].checked=!p.product_list[t].checked,p.product_list[t].checked?e.$cpsListContiner.find(".js_checkbox_label_"+t).addClass("selected"):e.$cpsListContiner.find(".js_checkbox_label_"+t).removeClass("selected"),
r.__changeSelectedCnt();
}),e.$loadmore=e.$cpsListContiner.find(".js_loading_more"),void 0==p.cpsSearchAllCnt||p.cpsSearchAllCnt==p.product_list.length?e.$loadmore.hide():e.$loadmore.show(),
e.$cpsListContiner.find(".js_qrcode").mouseover(function(){
var e=$(this).data("index");
r.httpGetProductQrCode({
appid:p.product_list[e].appid,
pid:p.product_list[e].pid,
index:e
});
}),e.$cpsListContiner.find(".js_go_open_publisher").click(function(){
window.open(window.wx.url("https://mp.weixin.qq.com/cgi-bin/frame?t=ad_system/common_frame&t1=publisher/host_index"));
});
}
function c(){
var e=r._g.dom;
if(void 0!=p.cpsSearchAllCnt){
var t="共有"+p.cpsSearchAllCnt+"条搜索记录";
e.$cpsAllCount.text(t),setTimeout(function(){
e.$cpsAllCount.hide();
},1800),e.$cpsAllCount.show();
}
}
function n(){
p.cpsSearchAllCnt=10;
var e="共有"+p.cpsSearchAllCnt+"条搜索记录";
o.suc(e),p.product_list=[];
for(var t=0;5>t;t++){
var i={
category_id:"book",
source_name:"图书",
img_url:"http://mmbiz.qpic.cn/mmbiz_jpg/cVgP5bCElFhf9rCNTMwIIxo8cO5LhdGiaVNGMETwC44UNoicsQ8XuqjH5jlr39wNqHibZtaCRfNTFibNf04t5uKcAQ/0?wx_fmt=jpeg",
pid:"abcde",
title:"图书名字"+t,
appid:"appid",
wxa_appid:"",
checked:!1,
has_commission:!1,
commission_ratio:"1%",
book:{
author:["书张三","书李四","书王五"]
}
},c={
category_id:"movie",
source_name:"电影",
img_url:"http://mmbiz.qpic.cn/mmbiz_jpg/cVgP5bCElFhf9rCNTMwIIxo8cO5LhdGiaVNGMETwC44UNoicsQ8XuqjH5jlr39wNqHibZtaCRfNTFibNf04t5uKcAQ/0?wx_fmt=jpeg",
pid:"abcde",
title:"电影名字"+t,
appid:"appid",
wxa_appid:"",
checked:!1,
has_commission:!0,
commission_ratio:"1%",
movie:{
actor:["电影张三","电影李四","电影王五"]
}
};
p.product_list.push(i),p.product_list.push(c);
}
s();
}
var r=this,a=this._g.dom;
return p.searchReq.category_id=a.$categorySelectedWording.data("id"),p.searchReq.source_id=a.$sourceSelectedWording.data("id"),
p.searchReq.keyword=a.$searchWord.val(),p.searchReq.order_by_commission_ratio=a.$commissionSelectedWording.data("id"),
p.searchReq.with_cps="0",p.searchReq.offset=0,p.searchReq.count=p.search_count,Object.assign(p.searchReq,e),
(null==e.offset||0==e.offset)&&(p.product_list=[],a.$cpsSelectedCntContainer.hide(),
a.$cpsListScrollArea.scrollTop(0),p.searchReq.offset=0),1==p.fortest?n():p.searchReq.category_id==d.getBookCategoryId()&&1==p.bookShowSpecial?(a.$cpsContainer.find(".js_common_container").hide(),
void a.$cpsContainer.find(".js_special_container").show()):(a.$cpsContainer.find(".js_special_container").hide(),
a.$cpsContainer.find(".js_common_container").show(),void i.post({
url:"/cgi-bin/cpsproductmaterial?action=search_product",
data:p.searchReq
},function(e){
e&&e.base_resp&&0==e.base_resp.ret?(p.cpsSearchAllCnt=e.num_found,0===p.searchReq.offset&&(p.product_list=[],
a.$cpsSelectedCntContainer.hide(),a.$cpsListContiner.scrollTop(0)),1==t&&c(),0==p.searchReq.offset&&(p.product_list=[]),
p.product_list=p.product_list.concat(e.product_list),s()):(p.cpsSearchAllCnt=0,p.product_list=[],
e&&e.base_resp?"353002"==e.base_resp.ret?o.err("目前仅支持中英文搜索"):"353003"==e.base_resp.ret&&o.err("操作频繁，请稍后再试"):o.err("系统失败，请重试"));
}));
},
loadMore:function(){
var e=this,t=this._g.dom;
t.$loadmore=t.$cpsListContiner.find(".js_loading_more"),clearTimeout(p.loadMoreTimer),
p.loadMoreTimer=setTimeout(function(){
return p.cpsSearchAllCnt===p.product_list.length?void t.$loadmore.hide():void(p.product_list.length!==p.searchReq.offset&&e.httpGetCpsList({
offset:p.product_list.length
},!1));
},100);
},
httpGetBaseInfo:function(){
function e(){
var e=n._g.dom;
p.bookShowSpecial=!1;
for(var t=0;t<p.category_list.length;t++)if(p.category_list[t].id==d.getBookCategoryId()){
0==p.category_list[t].enabled&&(p.bookShowSpecial=!0);
break;
}
var o=p.category_list;
p.category_list=[];
for(var i=0;i<o.length;i++)1==o[i].enabled&&p.category_list.push(o[i]);
p.category_list11=p.category_list.length>8?p.category_list.slice(0,8):p.category_list.slice(0),
e.$categoryContainer.html(n._g.categoryCompile({
category_list:p.category_list11,
currentid:p.category_list11[0].id
})),p.category_list.length>0&&(p.searchReq.category_id=p.category_list[0].id,e.$categorySelectedWording.text(p.category_list[0].name),
"全部"==e.$categorySelectedWording.text()?e.$cpsContainer.find(".js_fornotag").addClass("notag"):e.$cpsContainer.find(".js_fornotag").removeClass("notag"),
e.$categorySelectedWording.data("id",p.category_list[0].id)),e.$categoryContainer.find(".js_category").click(function(){
$(this).parent().find(".weui-desktop-tag_current").removeClass("weui-desktop-tag_current"),
$(this).addClass("weui-desktop-tag_current");
var t=$(this).data("id");
e.$categorySelectedWording.text($(this).text()),e.$categorySelectedWording.data("id",t),
"全部"==e.$categorySelectedWording.text()?e.$cpsContainer.find(".js_fornotag").addClass("notag"):e.$cpsContainer.find(".js_fornotag").removeClass("notag"),
n.httpGetCpsList({
category_id:t
},!1);
}),e.$showmorebtn=e.$dialog.find(".js_showmore_btn"),e.$showmorebtn.click(function(){
"展开更多"==e.$showmorebtn.text()?(e.$categoryContainer.html(n._g.categoryCompile({
category_list:p.category_list,
currentid:e.$categorySelectedWording.data("id")
})),e.$showmorebtn.text("收起"),e.$showmorebtn.addClass("up")):(e.$categoryContainer.html(n._g.categoryCompile({
category_list:p.category_list11,
currentid:e.$categorySelectedWording.data("id")
})),e.$showmorebtn.text("展开更多"),e.$showmorebtn.removeClass("up")),e.$categoryContainer.find(".js_category").click(function(){
$(this).parent().find(".weui-desktop-tag_current").removeClass("weui-desktop-tag_current"),
$(this).addClass("weui-desktop-tag_current");
var t=$(this).data("id");
e.$categorySelectedWording.text($(this).text()),e.$categorySelectedWording.data("id",t),
"全部"==e.$categorySelectedWording.text()?e.$cpsContainer.find(".js_fornotag").addClass("notag"):e.$cpsContainer.find(".js_fornotag").removeClass("notag"),
n.httpGetCpsList({
category_id:t
},!1);
});
}),p.category_list.length<=8&&e.$showmorebtn.hide();
}
function t(){
var e=n._g.dom;
e.$sourceContainer=e.$dialog.find(".js_source_container");
var t=[];
(void 0==p.source_list||0==p.source_list.length||"全部商家"!=p.source_list[0].name)&&t.push({
name:"全部商家",
value:0,
canDel:!1
});
for(var o=0;o<p.source_list.length;o++)void 0!=p.source_list[o]&&t.push({
name:p.source_list[o].name,
value:p.source_list[o].id,
canDel:!1
});
var i=n._g.sourceItemCompile({
data:t,
loading_img:!1
}),s=n._g.sourceCompile({
itemHtml:i,
search:!1,
canadd:!1,
label:t[0].name
});
e.$sourceContainer.html(s),e.$sourceSelectedWording=e.$sourceContainer.find(".jsBtLabel"),
e.$sourceSelectedWording.text(t[0].name),e.$sourceSelectedWording.data("id",t[0].value),
p.searchReq.source_id=t[0].value,e.$sourceContainer.find(".jsDropdownBt").click(function(t){
e.$sourceContainer.find(".jsDropdownList").show(),t.stopPropagation();
}),e.$sourceContainer.blur(function(){
e.$sourceContainer.find(".jsDropdownList").hide();
}),e.$sourceContainer.find(".jsDropdownItem").click(function(){
var t=$(this).data("name"),o=$(this).data("value");
e.$sourceSelectedWording.text(t),e.$sourceSelectedWording.data("id",o),p.searchReq.source_id=o,
e.$sourceContainer.find(".jsDropdownList").hide(),n.httpGetCpsList({
source_id:o
},!0);
});
}
function s(){
var e=n._g.dom;
e.$commissionContainer=e.$dialog.find(".js_commission_sort");
var t=[];
if(void 0==p.commission_list||0==p.commission_list.length)t.push({
name:"默认排序",
value:0,
canDel:!1
}),t.push({
name:"按返佣比例排序",
value:1,
canDel:!1
});else for(var o=0;o<p.commission_list.length;o++)void 0!=p.commission_list[o]&&t.push({
name:p.commission_list[o].name,
value:p.commission_list[o].id,
canDel:!1
});
var i=n._g.sourceItemCompile({
data:t,
loading_img:!1
}),s=n._g.sourceCompile({
itemHtml:i,
search:!1,
canadd:!1,
label:"返佣比例"
});
e.$commissionContainer.html(s),e.$commissionSelectedWording=e.$commissionContainer.find(".jsBtLabel"),
e.$commissionSelectedWording.text("返佣比例"),e.$commissionSelectedWording.data("id",t[0].value),
p.searchReq.commission_id=t[0].value,e.$commissionContainer.find(".jsDropdownBt").click(function(t){
e.$commissionContainer.find(".jsDropdownList").show(),t.stopPropagation();
}),e.$commissionContainer.blur(function(){
e.$commissionContainer.find(".jsDropdownList").hide();
}),e.$commissionContainer.find(".jsDropdownItem").click(function(){
var t=$(this).data("name"),o=$(this).data("value");
e.$commissionSelectedWording.data("id",o),e.$commissionSelectedWording.text(0==o?"返佣比例":t),
p.searchReq.commission_id=o,e.$commissionContainer.find(".jsDropdownList").hide(),
n.httpGetCpsList({
order_by_commission_ratio:o
},!1);
});
}
function c(){
p.category_list=[{
id:1,
name:"电影"
},{
id:2,
name:"图书"
}],p.source_list=[{
id:1,
name:"猫眼"
},{
id:2,
name:"京东"
},{
id:3,
name:"蘑菇街"
}],e(),t(),s();
var o=n._g.dom;
n.httpGetCpsList({
category_id:o.$categorySelectedWording.data("id"),
source_id:o.$sourceContainer.find(".jsBtLabel").data("index"),
keyword:"",
offset:0,
order_by_commission_ratio:1
},!1);
}
var n=this,r=this._g.dom;
return r.$cpsContainer.find(".js_category_forhide").hide(),p.fortest?c():void i.get({
url:"/cgi-bin/cpsproductmaterial?action=get_basic_info"
},function(i){
if(i&&i.base_resp&&0==i.base_resp.ret){
var c=n._g.dom;
p.can_be_publisher=i.can_be_publisher,p.is_publisher=i.is_publisher,p.publisher_no_permission_tips=i.publisher_no_permission_tips,
p.category_list=i.category_list,c.$cpsContainer.find(".js_category_forhide").show(),
p.source_list=i.source_list,e(),t(),s(),n.httpGetCpsList({
category_id:c.$categorySelectedWording.data("id"),
source_id:c.$sourceContainer.find(".jsBtLabel").data("index"),
keyword:"",
offset:0,
order_by_commission_ratio:c.$commissionContainer.find(".jsBtLabel").data("index")
},!1);
}else o.err("系统错误，请刷新重试");
});
},
httpGetProductQrCode:function(e){
function t(e){
if(void 0!=e.index){
var t=s._g.dom,o=t.$cpsListContiner.find(".js_qrcode_"+e.index);
if(e.status===!0){
t.$qrcodeSucc.find(".js_qrcode_img_url").attr("src",e.img_url);
var i=t.$qrcodeSucc.html();
void 0!=s.qrcodePop&&s.qrcodePop.hide(),s.qrcodePop=new l({
dom:o,
content:i,
place:"bottom",
margin:"center",
hover:!0,
hideIfBlur:!0,
addCls:"popover_qrcode_suc_container"
});
}else{
var i=t.$qrcodeFail.html();
void 0!=s.qrcodePop&&s.qrcodePop.hide(),s.qrcodePop=new l({
dom:o,
content:i,
place:"bottom",
margin:"center",
hover:!0,
hideIfBlur:!0,
addCls:"popover_qrcode_suc_container"
});
}
}
}
function o(){
p.qr_code_url="https://res.wx.qq.com/mpres/htmledition/images/mp_qrcode3a7b38.gif",
t({
status:!0,
img_url:p.qr_code_url
});
}
var s=this;
return p.fortest?o():void(e&&e.appid&&e.pid&&i.get({
url:"/cgi-bin/cpsproductmaterial?action=get_product_qr_code",
data:{
appid:e.appid,
pid:e.pid
}
},function(o){
o&&o.base_resp&&0==o.base_resp.ret?(p.qr_code_url=o.qr_code_url,t({
status:!0,
img_url:o.qr_code_url,
index:e.index
})):t({
status:!1,
index:e.index
});
}));
},
getSelectedProduct:function(){
var e=(this._g.dom,[]),t=[],i=[],s=[],c=!1;
if(p.product_list.forEach(function(o){
o.checked===!0&&(e.push(o),t.push(o.pid),i.push(o.appid),s.push(o.category_id),1==o.has_commission&&(c=!0));
}),!e||0==e.length)return o.err("请选择商品"),!1;
var n=e.length,r=1;
if(n>this._o.maxLen)return o.err("超出上限，当前最多选择%s个插入文章".sprintf(this._o.maxLen)),!1;
var a={
type:r,
templateId:p.templateData.default_template_id,
hasCommission:c,
productData:e,
productId:t,
appidList:i,
categoryidList:s,
packId:"",
smartNum:""
};
return a;
},
httpSetPulisher:function(e){
var t=this;
i.get({
url:"/cgi-bin/cpsproductmaterial?action=fast_open_cps_publisher"
},function(i){
i&&i.base_resp&&0==i.base_resp.ret?(console.log("设置流量主无权限时是否提醒: succ:",i),t._o.callback(t._g.selectedData),
e.tipThis.remove()):o.err("操作失败，请重试");
});
},
addListener:function(){},
destory:function(e){
e&&e.remove(),this.qrcodePop&&this.qrcodePop.hide(),this.askPop&&this.askPop.hide(),
this._g.dom=null,this._o.editor&&this._o.editor.fireEvent("handleWinScroll",!0);
}
},t;
});define("tpl/mpEditor/plugin/product_popup_icon.html.js",[],function(){
return'{each list as item}\n<span data-color="{item}" class="js_color_icon product-color__item" style="background-color: {item}"></span>\n{/each}';
});define("tpl/mpEditor/plugin/product_popup.html.js",[],function(){
return'<div class="js_product_popup edui_mask_edit_group with_line edui-product-popup">\n    <div class="js_template primary edui_mask_edit_meta no_extra edui-clickable" onclick="$$._fireEventAndHide(\'show_product_template_dialog\',this);">\n        <div class="edui_mask_edit_meta_inner">\n            <i class="icon_edui_mask_img icon_edui_mask_product_theme"></i>\n        选择模板        </div>\n    </div>\n	<div class="js_toggle primary edui_mask_edit_meta edui-clickable" onclick="$$._fireEvent(\'toggle_product_color\',arguments[0]||event,this);">\n        <div class="js_toggle edui_mask_edit_meta_inner">\n            <i class="icon_edui_mask_img icon_edui_mask_product_color"></i>\n        选择配色        </div>\n        <div class="js_color_picker product-color" style="display: none;">\n            <div class="product-color__list" onclick="$$._fireEvent(\'product_color_pick\',arguments[0]||event,this);">\n                {=colorList}\n            </div>\n            <div>\n                <span class="frm_input_box">\n                    <input type="text" class="js_color_input frm_input" placeholder="请输入色值，如#666666" onkeyup="$$._fireEvent(\'product_color_change\',arguments[0]||event,this);">\n                </span>\n            </div>\n            <p class="js_fail frm_msg fail" style="display: none;">\n                <span class="js_fail_msg frm_msg_content" style="display: inline;"></span>\n            </p>\n            <div class="product-color__description">一篇文章中只能使用一种自定义颜色，对所有默认模板生效</div>\n            <div class="product-color__opr"><a href="javascript:;" onclick="$$._fireEvent(\'product_color_change\',arguments[0]||event,this);return false;" class="btn btn_primary">确定</a></div>\n        </div>\n    </div>\n</div>\n';
});